{"ast":null,"code":"import _slicedToArray from\"/home/tomas/Escritorio/Plataforma5/Bootcamp/Integrador/checkpoint-TMDB-220102/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import CardRange from\"./CardRange\";import{useState,useContext}from\"react\";import{UserContext}from\"..\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Card=function Card(_ref){var data=_ref.data;var _useContext=useContext(UserContext),user=_useContext.user;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];// arreglos puramente esteticos \nvar center=data.name?\"centerSerie\":\"center\";//agrega a fav\nvar addFavorites=function addFavorites(e){setState(\"enabled\");user.favMoviesId.push(data.id);axios.post(\"/api/favorites/add\",user).catch(function(err){return console.log(err);});};//elimina de fav\nvar removeFavorites=function removeFavorites(e){setState(\"disabled\");user.favMoviesId=user.favMoviesId.filter(function(movies){return movies!==data.id;});axios.post(\"/api/favorites/remove\",user).catch(function(err){return console.log(err);});};//aqui me fijo si tiene la propiedad name que es propia de las series, en este proyecto solo se pueden agregar peliculas a fav\n//el boton de agregar a fav de Card solo aparece si el usuario esta logeado\n//se fija ademas si la pelicula ya esta en la lista de fav y deja el boton acitivado\nvar buttons=function buttons(){if(!data.name){if(user.id){if(user.favMoviesId.includes(data.id)){return/*#__PURE__*/_jsx(\"i\",{className:\"iLike iLike_press\",onClick:removeFavorites});}return/*#__PURE__*/_jsx(\"i\",{className:\"iLike\",onClick:addFavorites});}}return/*#__PURE__*/_jsx(_Fragment,{});};//algunos arreglos en la data de cada pelicula para poder mostrarla mejor en el front\nvar imgUrl=\"https://image.tmdb.org/t/p/w500\";var date=\"\";var overview=\"\".concat(data.overview.slice(0,170),\"...\");var title=data.title?\"\".concat(data.title.slice(0,35)):\"\".concat(data.name.slice(0,35));if(data.release_date)date=data.release_date.slice(0,4);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card movie_card \",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(imgUrl).concat(data.poster_path),className:\"card-img-top image\",alt:\"Movie Poster\"}),/*#__PURE__*/_jsx(\"div\",{class:\"details\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"\".concat(center),children:[/*#__PURE__*/_jsx(\"h1\",{children:title}),/*#__PURE__*/_jsx(\"p\",{children:overview}),/*#__PURE__*/_jsx(\"div\",{children:buttons()})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"movie_info float-left\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"movie_info\",children:date}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:/*#__PURE__*/_jsx(\"strong\",{children:title})})]}),/*#__PURE__*/_jsx(CardRange,{range:data.vote_average})]})]})});};export default Card;","map":{"version":3,"sources":["/home/tomas/Escritorio/Plataforma5/Bootcamp/Integrador/checkpoint-TMDB-220102/src/common/Card.jsx"],"names":["CardRange","useState","useContext","UserContext","axios","Card","data","user","state","setState","center","name","addFavorites","e","favMoviesId","push","id","post","catch","err","console","log","removeFavorites","filter","movies","buttons","includes","imgUrl","date","overview","slice","title","release_date","poster_path","vote_average"],"mappings":"oMAAA,MAAOA,CAAAA,SAAP,KAAsB,aAAtB,CACA,OAAQC,QAAR,CAAkBC,UAAlB,KAAoC,OAApC,CACA,OAASC,WAAT,KAA4B,IAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,MAAc,IAAXC,CAAAA,IAAW,MAAXA,IAAW,CACzB,gBAAeJ,UAAU,CAACC,WAAD,CAAzB,CAAOI,IAAP,aAAOA,IAAP,CACA,cAAyBN,QAAQ,CAAC,EAAD,CAAjC,wCAAOO,KAAP,eAAaC,QAAb,eAEA;AACA,GAAMC,CAAAA,MAAM,CAAGJ,IAAI,CAACK,IAAL,CAAY,aAAZ,CAA2B,QAA1C,CAGD;AACC,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1BJ,QAAQ,CAAC,SAAD,CAAR,CACCF,IAAI,CAACO,WAAL,CAAiBC,IAAjB,CAAsBT,IAAI,CAACU,EAA3B,EACDZ,KAAK,CACFa,IADH,CACQ,oBADR,CAC6BV,IAD7B,EAEGW,KAFH,CAES,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAFZ,EAKD,CARD,CASD;AACC,GAAMG,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACT,CAAD,CAAO,CAC7BJ,QAAQ,CAAC,UAAD,CAAR,CACAF,IAAI,CAACO,WAAL,CAAmBP,IAAI,CAACO,WAAL,CAAiBS,MAAjB,CAAwB,SAAAC,MAAM,QAAGA,CAAAA,MAAM,GAAKlB,IAAI,CAACU,EAAnB,EAA9B,CAAnB,CACAZ,KAAK,CACJa,IADD,CACM,uBADN,CAC8BV,IAD9B,EAECW,KAFD,CAEO,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAFV,EAGD,CAND,CAQF;AACA;AACA;AACE,GAAMM,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB,GAAG,CAACnB,IAAI,CAACK,IAAT,CAAc,CACZ,GAAGJ,IAAI,CAACS,EAAR,CAAW,CACT,GAAIT,IAAI,CAACO,WAAN,CAAmBY,QAAnB,CAA4BpB,IAAI,CAACU,EAAjC,CAAH,CAAwC,CACpC,mBAAQ,UAAG,SAAS,CAAC,mBAAb,CAAiC,OAAO,CAAEM,eAA1C,EAAR,CACH,CACC,mBAAO,UAAG,SAAS,CAAC,OAAb,CAAqB,OAAO,CAAEV,YAA9B,EAAP,CACH,CACF,CAEJ,mBAAO,kBAAP,CACE,CAXD,CAaF;AACE,GAAMe,CAAAA,MAAM,CAAG,iCAAf,CACA,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACA,GAAIC,CAAAA,QAAQ,WAAMvB,IAAI,CAACuB,QAAL,CAAcC,KAAd,CAAoB,CAApB,CAAuB,GAAvB,CAAN,OAAZ,CACA,GAAIC,CAAAA,KAAK,CAAGzB,IAAI,CAACyB,KAAL,WAAiBzB,IAAI,CAACyB,KAAL,CAAWD,KAAX,CAAiB,CAAjB,CAAoB,EAApB,CAAjB,YAAkDxB,IAAI,CAACK,IAAL,CAAUmB,KAAV,CAAgB,CAAhB,CAAmB,EAAnB,CAAlD,CAAZ,CACA,GAAIxB,IAAI,CAAC0B,YAAT,CAAuBJ,IAAI,CAAGtB,IAAI,CAAC0B,YAAL,CAAkBF,KAAlB,CAAwB,CAAxB,CAA2B,CAA3B,CAAP,CAGvB,mBACE,sCACE,aAAK,SAAS,CAAC,kBAAf,wBACE,YACE,GAAG,WAAKH,MAAL,SAAcrB,IAAI,CAAC2B,WAAnB,CADL,CAEE,SAAS,CAAC,oBAFZ,CAGE,GAAG,CAAC,cAHN,EADF,cAME,YAAK,KAAK,CAAC,SAAX,uBACE,aAAK,KAAK,WAAKvB,MAAL,CAAV,wBACE,oBAAKqB,KAAL,EADF,cAEE,mBAAIF,QAAJ,EAFF,cAGE,qBACCJ,OAAO,EADR,EAHF,GADF,EANF,cAeE,aAAK,SAAS,CAAC,WAAf,wBACE,cAAM,SAAS,CAAC,uBAAhB,wBACE,aAAM,SAAS,CAAC,YAAhB,UAA8BG,IAA9B,EADF,cAEE,WAAI,SAAS,CAAC,YAAd,uBACE,wBAASG,KAAT,EADF,EAFF,GADF,cAOE,KAAC,SAAD,EAAW,KAAK,CAAEzB,IAAI,CAAC4B,YAAvB,EAPF,GAfF,GADF,EADF,CA6BD,CAhFD,CAkFA,cAAe7B,CAAAA,IAAf","sourcesContent":["import CardRange from \"./CardRange\";\nimport {useState, useContext } from \"react\";\nimport { UserContext } from \"..\";\nimport axios from \"axios\";\n\nconst Card = ({ data }) => {\n  const {user} = useContext(UserContext);\n  const [state,setState] = useState(\"\")\n\n  // arreglos puramente esteticos \n  const center = data.name ? \"centerSerie\": \"center\";\n  \n\n //agrega a fav\n  const addFavorites = (e) => {\n    setState(\"enabled\")\n     user.favMoviesId.push(data.id)\n    axios\n      .post(\"/api/favorites/add\",user)\n      .catch(err => console.log(err))\n      \n    \n  };\n //elimina de fav\n  const removeFavorites = (e) => {\n    setState(\"disabled\")\n    user.favMoviesId = user.favMoviesId.filter(movies=> movies !== data.id)\n    axios\n    .post(\"/api/favorites/remove\",user)\n    .catch(err => console.log(err))\n  }\n\n//aqui me fijo si tiene la propiedad name que es propia de las series, en este proyecto solo se pueden agregar peliculas a fav\n//el boton de agregar a fav de Card solo aparece si el usuario esta logeado\n//se fija ademas si la pelicula ya esta en la lista de fav y deja el boton acitivado\n  const buttons = () => {\n    if(!data.name){\n      if(user.id){\n        if((user.favMoviesId).includes(data.id)){\n            return  <i className=\"iLike iLike_press\" onClick={removeFavorites}></i>\n        }\n          return <i className=\"iLike\" onClick={addFavorites}></i>\n      }\n    }\n   \n return <></>\n  }\n\n//algunos arreglos en la data de cada pelicula para poder mostrarla mejor en el front\n  const imgUrl = \"https://image.tmdb.org/t/p/w500\";\n  let date = \"\";\n  let overview = `${data.overview.slice(0, 170)}...`;\n  let title = data.title ? (`${data.title.slice(0, 35)}`) : (`${data.name.slice(0, 35)}`)\n  if (data.release_date) date = data.release_date.slice(0, 4);\n\n\n  return (\n    <>\n      <div className=\"card movie_card \">\n        <img\n          src={`${imgUrl}${data.poster_path}`}\n          className=\"card-img-top image\"\n          alt=\"Movie Poster\"\n        ></img>\n        <div class=\"details\">\n          <div class={`${center}`}>\n            <h1>{title}</h1>\n            <p>{overview}</p>\n            <div>\n            {buttons()}\n            </div>\n          </div>\n        </div>\n        <div className=\"card-body\">\n          <span className=\"movie_info float-left\">\n            <span className=\"movie_info\">{date}</span>\n            <h5 className=\"card-title\">\n              <strong>{title}</strong>\n            </h5>\n          </span>\n          <CardRange range={data.vote_average} />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Card;\n"]},"metadata":{},"sourceType":"module"}